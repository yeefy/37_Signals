(function(e,t){"use strict";function u(){s&&(s.setAttribute("height",""),s.setAttribute("height",n.height||n.documentElement.clientHeight))}function a(){s&&r.removeChild(s),s=n.createElement("iframe"),s.setAttribute("width","100%"),u(),r.appendChild(s)}function f(e){a(),s.addEventListener("load",function(){l("load",null)},!1);var t=s.contentWindow.document;t.open(),t.write(e),t.close()}function l(t,n){var r=i.stringify({data:n,type:t,secret:o});e.parent.postMessage(r,"*")}function c(e,t){var n=s.contentWindow.Error;if(e&&e instanceof Error||e instanceof n)e={message:e.message,stack:e.stack,type:e.type,arguments:e.arguments,__errorType__:String(e.constructor).trim().match(/^function ([^\(\s]+)/)[1]};typeof t=="function"&&(t=String(t)),l("evaljs",{error:e,result:t})}function h(e){var t=null;try{t=s.contentWindow.eval(e)}catch(n){throw c(n,null),n}c(null,t)}function p(){l("html",s.contentWindow.document.documentElement.outerHTML)}var n=e.document,r=n.querySelector("body"),i=e.JSON,s,o,d={load:f,evaljs:h,html:p};e.addEventListener("message",function(e){var t;try{t=i.parse(e.data)}catch(n){return}var r=t.type,s=t.data;if(!t.secret)return;if(!o&&t.type==="handshake")o=t.secret;else{if(t.secret!==o)return;d[r](s)}},!1),e.addEventListener("resize",u),e.stuffEmit=function(e,t){l("custom",{type:e,data:t})}})(window);